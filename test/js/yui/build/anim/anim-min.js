/*
Copyright (c) 2008, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.net/yui/license.txt
version: 3.0.0pr2
*/
YUI.add("anim",function(C){var D="running",O="startTime",M="elapsedTime",K="start",J="tween",N="end",E="node",L="paused",Q="reverse",I="iterationCount",B=Number;var G={},P={},F;C.Anim=function(){C.Anim.superclass.constructor.apply(this,arguments);P[C.stamp(this)]=this;};C.Anim.NAME="anim";C.Anim.RE_DEFAULT_UNIT=/^width|height|top|right|bottom|left|margin.*|padding.*|border.*$/i;C.Anim.DEFAULT_UNIT="px";C.Anim.DEFAULT_EASING=function(S,R,U,T){return U*S/T+R;};C.Anim.behaviors={left:{get:function(S,R){return S._getOffset(R);}}};C.Anim.behaviors.top=C.Anim.behaviors.left;C.Anim.DEFAULT_SETTER=function(V,S,Y,X,R,W,T,U){U=U||"";V._node.setStyle(S,T(R,B(Y),B(X)-B(Y),W)+U);};C.Anim.DEFAULT_GETTER=function(R,S){return R._node.getComputedStyle(S);};C.Anim.ATTRS={node:{set:function(R){R=C.Node.get(R);this._node=R;if(!R){C.fail("Y.Anim: invalid node: "+R);}return R;}},duration:{value:1},easing:{value:C.Anim.DEFAULT_EASING,set:function(R){if(typeof R==="string"&&C.Easing){return C.Easing[R];}}},from:{},to:{},startTime:{value:0,readOnly:true},elapsedTime:{value:0,readOnly:true},running:{get:function(){return !!G[C.stamp(this)];},value:false,readOnly:true},iterations:{value:1},iterationCount:{value:0,readOnly:true},direction:{value:"normal"},paused:{readOnly:true,value:false},reverse:{value:false}};C.Anim.run=function(){for(var R in P){if(P[R].run){P[R].run();}}};C.Anim.pause=function(){for(var R in G){if(G[R].pause){G[R].pause();}}C.Anim._stopTimer();};C.Anim.stop=function(){for(var R in G){if(G[R].stop){G[R].stop();}}C.Anim._stopTimer();};C.Anim._startTimer=function(){if(!F){F=setInterval(C.Anim._runFrame,1);}};C.Anim._stopTimer=function(){clearInterval(F);F=0;};C.Anim._runFrame=function(){var R=true;for(var S in G){if(G[S]._runFrame){R=false;G[S]._runFrame();}}if(R){C.Anim._stopTimer();}};C.Anim.RE_UNITS=/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/;var H={run:function(){if(!this.get(D)){this._start();}else{if(this.get(L)){this._resume();}}return this;},pause:function(){if(this.get(D)){this._pause();}return this;},stop:function(R){if(this.get(D)||this.get(L)){this._end(R);}return this;},_added:false,_start:function(){this._set(O,new Date()-this.get(M));this._actualFrames=0;if(!this.get(L)){this._initAttr();}G[C.stamp(this)]=this;C.Anim._startTimer();this.fire(K);},_pause:function(){this._set(O,null);this._set(L,true);delete G[C.stamp(this)];this.fire("pause");},_resume:function(){this._set(L,false);G[C.stamp(this)]=this;this.fire("resume");},_end:function(R){this._set(O,null);this._set(M,0);this._set(L,false);delete G[C.stamp(this)];this.fire(N,{elapsed:this.get(M)});},_runFrame:function(){var Y=this._runtimeAttr,T=C.Anim.behaviors,Z=Y.easing,a=Y.duration,b=new Date()-this.get(O),X=this.get(Q),V=(b>=a),R=a,S,U;if(X){b=a-b;V=(b<=0);R=0;}for(var W in Y){if(Y[W].to){S=Y[W];U=(W in T&&"set" in T[W])?T[W].set:C.Anim.DEFAULT_SETTER;if(!V){U(this,W,S.from,S.to,b,a,Z,S.unit);}else{U(this,W,S.from,S.to,R,a,Z,S.unit);}}}this._actualFrames+=1;this._set(M,b);this.fire(J);if(V){this._lastFrame();}},_lastFrame:function(){var R=this.get("iterations"),S=this.get(I);S+=1;if(R==="infinite"||S<R){if(this.get("direction")==="alternate"){this.set(Q,!this.get(Q));}this.fire("iteration");}else{S=0;this._end();}this._set(O,new Date());this._set(I,S);},_initAttr:function(){var Y=this.get("from")||{},Z=this.get("to")||{},R=this.get("duration")*1000,U=this.get(E),X=this.get("easing")||{},W={},S=C.Anim.behaviors,a,T,V;C.each(Z,function(g,d){if(typeof g==="function"){g=g.call(this,U);}T=Y[d];if(T===undefined){T=(d in S&&"get" in S[d])?S[d].get(this,d):C.Anim.DEFAULT_GETTER(this,d);}else{if(typeof T==="function"){T=T.call(this,U);}}var c=C.Anim.RE_UNITS.exec(T);var e=C.Anim.RE_UNITS.exec(g);T=c?c[1]:T;var b=e?e[1]:g,f=e?e[2]:c?c[2]:"";if(!f&&C.Anim.RE_DEFAULT_UNIT.test(d)){f=C.Anim.DEFAULT_UNIT;}if(!T||!b){C.fail('invalid "from" or "to" for "'+d+'"',"Anim");return ;}W[d]={from:T,to:b,unit:f};W.duration=R;W.easing=X;},this);this._runtimeAttr=W;},_getOffset:function(S){var U=this._node,V=U.getComputedStyle(S),T=(S==="left")?"getX":"getY",W=(S==="left")?"setX":"setY";if(V==="auto"){var R=U.getStyle("position");if(R==="absolute"||R==="fixed"){V=U[T]();U[W](V);}else{V=0;}}return V;}};C.extend(C.Anim,C.Base,H);C.Easing={easeNone:function(S,R,U,T){return U*S/T+R;},easeIn:function(S,R,U,T){return U*(S/=T)*S+R;},easeOut:function(S,R,U,T){return -U*(S/=T)*(S-2)+R;},easeBoth:function(S,R,U,T){if((S/=T/2)<1){return U/2*S*S+R;}return -U/2*((--S)*(S-2)-1)+R;},easeInStrong:function(S,R,U,T){return U*(S/=T)*S*S*S+R;},easeOutStrong:function(S,R,U,T){return -U*((S=S/T-1)*S*S*S-1)+R;},easeBothStrong:function(S,R,U,T){if((S/=T/2)<1){return U/2*S*S*S*S+R;}return -U/2*((S-=2)*S*S*S-2)+R;},elasticIn:function(T,R,X,W,S,V){var U;if(T===0){return R;}if((T/=W)===1){return R+X;}if(!V){V=W*0.3;}if(!S||S<Math.abs(X)){S=X;U=V/4;}else{U=V/(2*Math.PI)*Math.asin(X/S);}return -(S*Math.pow(2,10*(T-=1))*Math.sin((T*W-U)*(2*Math.PI)/V))+R;},elasticOut:function(T,R,X,W,S,V){var U;if(T===0){return R;}if((T/=W)===1){return R+X;}if(!V){V=W*0.3;}if(!S||S<Math.abs(X)){S=X;U=V/4;}else{U=V/(2*Math.PI)*Math.asin(X/S);}return S*Math.pow(2,-10*T)*Math.sin((T*W-U)*(2*Math.PI)/V)+X+R;},elasticBoth:function(T,R,X,W,S,V){var U;if(T===0){return R;}if((T/=W/2)===2){return R+X;}if(!V){V=W*(0.3*1.5);}if(!S||S<Math.abs(X)){S=X;U=V/4;}else{U=V/(2*Math.PI)*Math.asin(X/S);}if(T<1){return -0.5*(S*Math.pow(2,10*(T-=1))*Math.sin((T*W-U)*(2*Math.PI)/V))+R;}return S*Math.pow(2,-10*(T-=1))*Math.sin((T*W-U)*(2*Math.PI)/V)*0.5+X+R;},backIn:function(S,R,V,U,T){if(T==undefined){T=1.70158;}if(S===U){S-=0.001;}return V*(S/=U)*S*((T+1)*S-T)+R;},backOut:function(S,R,V,U,T){if(typeof T==="undefined"){T=1.70158;}return V*((S=S/U-1)*S*((T+1)*S+T)+1)+R;},backBoth:function(S,R,V,U,T){if(typeof T==="undefined"){T=1.70158;}if((S/=U/2)<1){return V/2*(S*S*(((T*=(1.525))+1)*S-T))+R;}return V/2*((S-=2)*S*(((T*=(1.525))+1)*S+T)+2)+R;},bounceIn:function(S,R,U,T){return U-C.Easing.bounceOut(T-S,0,U,T)+R;},bounceOut:function(S,R,U,T){if((S/=T)<(1/2.75)){return U*(7.5625*S*S)+R;
}else{if(S<(2/2.75)){return U*(7.5625*(S-=(1.5/2.75))*S+0.75)+R;}else{if(S<(2.5/2.75)){return U*(7.5625*(S-=(2.25/2.75))*S+0.9375)+R;}}}return U*(7.5625*(S-=(2.625/2.75))*S+0.984375)+R;},bounceBoth:function(S,R,U,T){if(S<T/2){return C.Easing.bounceIn(S*2,0,U,T)*0.5+R;}return C.Easing.bounceOut(S*2-T,0,U,T)*0.5+U*0.5+R;}};var B=Number;C.Anim.behaviors.xy={set:function(U,S,X,W,R,V,T){U._node.setXY([T(R,B(X[0]),B(W[0])-B(X[0]),V),T(R,B(X[1]),B(W[1])-B(X[1]),V)]);},get:function(R){return R._node.getXY();}};var B=Number;C.Anim.behaviors.color={set:function(U,S,X,W,R,V,T){X=C.Color.re_RGB.exec(C.Color.toRGB(X));W=C.Color.re_RGB.exec(C.Color.toRGB(W));if(!X||X.length<3||!W||W.length<3){C.fail("invalid from or to passed to color behavior");}U._node.setStyle(S,"rgb("+[Math.floor(T(R,B(X[1]),B(W[1])-B(X[1]),V)),Math.floor(T(R,B(X[2]),B(W[2])-B(X[2]),V)),Math.floor(T(R,B(X[3]),B(W[3])-B(X[3]),V))].join(", ")+")");},get:function(S,R){var T=S._node.getComputedStyle(R);T=(T==="transparent")?"rgb(255, 255, 255)":T;return T;}};C.each(["backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],function(R,S){C.Anim.behaviors[R]=C.Anim.behaviors.color;});var B=Number;C.Anim.behaviors.scroll={set:function(U,V,X,Y,Z,T,W){var S=U._node,R=([W(Z,B(X[0]),B(Y[0])-B(X[0]),T),W(Z,B(X[1]),B(Y[1])-B(X[1]),T)]);if(R[0]){S.set("scrollLeft",R[0]);}if(R[1]){S.set("scrollTop",R[1]);}},get:function(S){var R=S._node;return[R.get("scrollLeft"),R.get("scrollTop")];}};C.Anim.behaviors.curve={set:function(V,S,Y,X,R,W,U){Y=Y.slice.call(Y);X=X.slice.call(X);var T=U(R,0,100,W)/100;X.unshift(Y);V._node.setXY(C.Anim.getBezier(X,T));},get:function(S,R){return S._node.getXY();}};C.Anim.getBezier=function(V,U){var W=V.length;var T=[];for(var S=0;S<W;++S){T[S]=[V[S][0],V[S][1]];}for(var R=1;R<W;++R){for(S=0;S<W-R;++S){T[S][0]=(1-U)*T[S][0]+U*T[parseInt(S+1,10)][0];T[S][1]=(1-U)*T[S][1]+U*T[parseInt(S+1,10)][1];}}return[T[0][0],T[0][1]];};var A=function(R){var R=C.merge(R);R.node=R.owner;A.superclass.constructor.apply(this,arguments);};A.NAME="nodefx";A.NS="fx";C.extend(A,C.Anim);C.namespace("plugin");C.plugin.NodeFX=A;},"3.0.0pr2",{requires:["base","node"]});